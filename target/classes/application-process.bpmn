<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:modeler="http://camunda.org/schema/modeler/1.0" id="Definitions_ApplicationProcess" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="5.34.0" modeler:executionPlatform="Camunda Platform" modeler:executionPlatformVersion="7.23.0">
  <bpmn:process id="student-application-process" name="Student Application Process" isExecutable="true" camunda:historyTimeToLive="30">
    <bpmn:startEvent id="StartEvent_ApplicationReceived" name="Bewerbung eingegangen">
      <bpmn:outgoing>Flow_ToSaveApplication</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="Task_SaveApplication" name="Bewerbung speichern" camunda:delegateExpression="#{saveApplicationDelegate}">
      <bpmn:incoming>Flow_ToSaveApplication</bpmn:incoming>
      <bpmn:outgoing>Flow_ToWelcomeMessage</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_WelcomeMessage" name="Willkommensnachricht erstellen" camunda:delegateExpression="#{welcomeMessageDelegate}">
      <bpmn:incoming>Flow_ToWelcomeMessage</bpmn:incoming>
      <bpmn:outgoing>Flow_ToDeadlineCheck</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_DeadlineCheck" name="Bewerbungsfrist prüfen" camunda:delegateExpression="#{deadlineCheckDelegate}">
      <bpmn:incoming>Flow_ToDeadlineCheck</bpmn:incoming>
      <bpmn:incoming>Flow_ReturnToValidation</bpmn:incoming>
      <bpmn:outgoing>Flow_ToDeadlineGateway</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_DeadlineDecision" name="Frist eingehalten?">
      <bpmn:incoming>Flow_ToDeadlineGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_OnTime</bpmn:outgoing>
      <bpmn:outgoing>Flow_TooLate</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_HandleRejection" name="Bewerbung ablehnen" camunda:delegateExpression="#{rejectionHandlerDelegate}">
      <bpmn:incoming>Flow_TooLate</bpmn:incoming>
      <bpmn:outgoing>Flow_ToRejectionEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:userTask id="Task_DocumentVerification" name="Dokumente prüfen" camunda:assignee="demo" camunda:candidateGroups="admins,staff">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="applicantName" label="Bewerber Name" type="string" defaultValue="${firstName} ${lastName}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="applicantEmail" label="E-Mail" type="string" defaultValue="${email}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="studyProgram" label="Studiengang" type="string" defaultValue="${studyProgramName}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="applicationId" label="Bewerbungs-ID" type="string" defaultValue="${applicationId}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="applicationDate" label="Eingangsdatum" type="string" defaultValue="${applicationDate}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="documentsComplete" label="Sind alle erforderlichen Dokumente vollständig?" type="boolean" />
          <camunda:formField id="missingDocuments" label="Fehlende Dokumente (falls unvollständig)" type="string">
            <camunda:properties>
              <camunda:property id="placeholder" value="z.B. Abiturzeugnis, Lebenslauf, Motivationsschreiben..." />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="verificationNotes" label="Anmerkungen zur Dokumentenprüfung" type="string">
            <camunda:properties>
              <camunda:property id="placeholder" value="Zusätzliche Bemerkungen..." />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="verifiedBy" label="Geprüft von" type="string">
            <camunda:properties>
              <camunda:property id="placeholder" value="Name des Sachbearbeiters" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_OnTime</bpmn:incoming>
      <bpmn:outgoing>Flow_ToDocumentGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_DocumentDecision" name="Dokumente vollständig?">
      <bpmn:incoming>Flow_ToDocumentGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_DocumentsComplete</bpmn:outgoing>
      <bpmn:outgoing>Flow_DocumentsIncomplete</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_HandleIncompleteDocuments" name="Unvollständige Dokumente behandeln" camunda:delegateExpression="#{incompleteDocumentsDelegate}">
      <bpmn:incoming>Flow_DocumentsIncomplete</bpmn:incoming>
      <bpmn:outgoing>Flow_WaitForDocuments</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_CompleteDocumentVerification" name="Dokumentenprüfung abschließen" camunda:delegateExpression="#{completeDocumentVerificationDelegate}">
      <bpmn:incoming>Flow_DocumentsComplete</bpmn:incoming>
      <bpmn:outgoing>Flow_ToAdmission</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_ApplicationRejected" name="Bewerbung abgelehnt">
      <bpmn:incoming>Flow_ToRejectionEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_ToSaveApplication" sourceRef="StartEvent_ApplicationReceived" targetRef="Task_SaveApplication" />
    <bpmn:sequenceFlow id="Flow_ToWelcomeMessage" sourceRef="Task_SaveApplication" targetRef="Task_WelcomeMessage" />
    <bpmn:sequenceFlow id="Flow_ToDeadlineCheck" sourceRef="Task_WelcomeMessage" targetRef="Task_DeadlineCheck" />
    <bpmn:sequenceFlow id="Flow_ToDeadlineGateway" sourceRef="Task_DeadlineCheck" targetRef="Gateway_DeadlineDecision" />
    <bpmn:sequenceFlow id="Flow_OnTime" name="Rechtzeitig eingereicht" sourceRef="Gateway_DeadlineDecision" targetRef="Task_DocumentVerification">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{isApplicationOnTime == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_TooLate" name="Frist überschritten" sourceRef="Gateway_DeadlineDecision" targetRef="Task_HandleRejection">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{isApplicationOnTime == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ToDocumentGateway" sourceRef="Task_DocumentVerification" targetRef="Gateway_DocumentDecision" />
    <bpmn:sequenceFlow id="Flow_DocumentsComplete" name="Dokumente vollständig" sourceRef="Gateway_DocumentDecision" targetRef="Task_CompleteDocumentVerification">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{documentsComplete == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_DocumentsIncomplete" name="Dokumente unvollständig" sourceRef="Gateway_DocumentDecision" targetRef="Task_HandleIncompleteDocuments">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{documentsComplete == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ToRejectionEnd" sourceRef="Task_HandleRejection" targetRef="Event_ApplicationRejected" />
    <bpmn:intermediateCatchEvent id="Event_WaitForDocuments" name="Warten auf Dokumentenvervollständigung">
      <bpmn:incoming>Flow_WaitForDocuments</bpmn:incoming>
      <bpmn:outgoing>Flow_ReturnToValidation</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0nbby53">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT1M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_WaitForDocuments" sourceRef="Task_HandleIncompleteDocuments" targetRef="Event_WaitForDocuments" />
    <bpmn:sequenceFlow id="Flow_ReturnToValidation" sourceRef="Event_WaitForDocuments" targetRef="Task_DeadlineCheck" />
    <bpmn:exclusiveGateway id="Gateway_AdmissionType" name="Zulassungsart?">
      <bpmn:incoming>Flow_ToAdmission</bpmn:incoming>
      <bpmn:outgoing>Flow_OpenAdmission</bpmn:outgoing>
      <bpmn:outgoing>Flow_NumerusClausus</bpmn:outgoing>
      <bpmn:outgoing>Flow_EntranceExam</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_ToAdmission" sourceRef="Task_CompleteDocumentVerification" targetRef="Gateway_AdmissionType" />
    <bpmn:serviceTask id="Task_DirectAdmission" name="Direkte Zulassung" camunda:delegateExpression="#{directAdmissionDelegate}">
      <bpmn:incoming>Flow_OpenAdmission</bpmn:incoming>
      <bpmn:outgoing>Flow_ToPaymentProcess</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_CalculateNCRanking" name="NC-Rangfolge berechnen" camunda:delegateExpression="#{ncRankingDelegate}">
      <bpmn:incoming>Flow_ToCalculteNote</bpmn:incoming>
      <bpmn:outgoing>Flow_ToNCSelection</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_ScheduleEntranceExam" name="Aufnahmeprüfung terminieren " camunda:delegateExpression="#{scheduleExamDelegate}">
      <bpmn:incoming>Flow_EntranceExam</bpmn:incoming>
      <bpmn:outgoing>Flow_ToExamNotification</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_OpenAdmission" name="Zulassungsfrei" sourceRef="Gateway_AdmissionType" targetRef="Task_DirectAdmission">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${admissionType == 'OPEN'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_NumerusClausus" name="Numerus Clausus" sourceRef="Gateway_AdmissionType" targetRef="Event_WaitToCalculate">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${admissionType == 'NUMERUS_CLAUSUS'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_EntranceExam" name="Aufnahmeprüfung" sourceRef="Gateway_AdmissionType" targetRef="Task_ScheduleEntranceExam">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${admissionType == 'ENTRANCE_EXAM'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_NCAccepted" name="Angenommen" sourceRef="Gateway_NCDecision" targetRef="Task_SendAdmissionLetter">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ncAdmissionDecision == 'ACCEPTED'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_NCRejected" name="Abgelehnt" sourceRef="Gateway_NCDecision" targetRef="Task_NCRejection">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ncAdmissionDecision == 'REJECTED'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="Task_ConductEntranceExam" name="Aufnahmeprüfung durchführen" camunda:candidateGroups="professors,exam-committee">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="applicantName" label="Bewerber" type="string" defaultValue="${firstName} ${lastName}">
            <camunda:properties>
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
                <!-- Date simplifiée -->
                <camunda:formField id="examDate" label="Prüfungsdatum" type="string" defaultValue="28.07.2025" />

                <!-- Scores -->
                <camunda:formField id="examScore" label="Prüfungsergebnis (Punkte)" type="long" />
                <camunda:formField id="maxScore" label="Maximale Punktzahl" type="long" defaultValue="100" />

                <!-- Résultat principal -->
                <camunda:formField id="examPassed" label="Prüfung bestanden?" type="boolean">
                  <camunda:validation>
                    <camunda:constraint name="required" />
                  </camunda:validation>
                </camunda:formField>

                <!-- Informations du professeur -->
                <camunda:formField id="examiner" label="Prüfer" type="string" />
                <camunda:formField id="examNotes" label="Bemerkungen" type="string" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_ToExamWait</bpmn:incoming>
      <bpmn:outgoing>Flow_ToExamGateway</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="Task_SendExamInvitation" name="Prüfungseinladung versenden" camunda:delegateExpression="#{examInvitationDelegate}">
      <bpmn:incoming>Flow_ToExamNotification</bpmn:incoming>
      <bpmn:outgoing>Flow_ToExamWait</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_ToExamNotification" sourceRef="Task_ScheduleEntranceExam" targetRef="Task_SendExamInvitation" />
    <bpmn:sequenceFlow id="Flow_ToExamWait" sourceRef="Task_SendExamInvitation" targetRef="Task_ConductEntranceExam" />
    <bpmn:serviceTask id="Task_NCSelection" name="NC-Auswahlverfahren" camunda:delegateExpression="#{ncSelectionDelegate}">
      <bpmn:incoming>Flow_ToNCSelection</bpmn:incoming>
      <bpmn:outgoing>Flow_19qgtg9</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_ToNCSelection" sourceRef="Task_CalculateNCRanking" targetRef="Task_NCSelection" />
    <bpmn:exclusiveGateway id="Gateway_NCDecision" name="NC-Zulassung?">
      <bpmn:incoming>Flow_19qgtg9</bpmn:incoming>
      <bpmn:outgoing>Flow_NCRejected</bpmn:outgoing>
      <bpmn:outgoing>Flow_NCAccepted</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_19qgtg9" sourceRef="Task_NCSelection" targetRef="Gateway_NCDecision" />
    <bpmn:serviceTask id="Task_NCRejection" name="NC-Absage versenden" camunda:delegateExpression="#{ncRejectionDelegate}">
      <bpmn:incoming>Flow_NCRejected</bpmn:incoming>
      <bpmn:outgoing>Flow_ToNCRejectionEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_NCRejection" name="Ablehnung - NC nicht erreicht">
      <bpmn:incoming>Flow_ToNCRejectionEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_ToNCRejectionEnd" sourceRef="Task_NCRejection" targetRef="Event_NCRejection" />
    <bpmn:serviceTask id="Task_SendAdmissionLetter" name="Zulassungsbescheid versenden" camunda:delegateExpression="#{admissionLetterDelegate}">
      <bpmn:incoming>Flow_ExamPassed</bpmn:incoming>
      <bpmn:incoming>Flow_ToPaymentProcess</bpmn:incoming>
      <bpmn:incoming>Flow_NCAccepted</bpmn:incoming>
      <bpmn:outgoing>Flow_ToPaymentWait</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_ExamResult" name="Prüfung bestanden?">
      <bpmn:incoming>Flow_ToExamGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_ExamFailed</bpmn:outgoing>
      <bpmn:outgoing>Flow_ExamPassed</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_ToExamGateway" sourceRef="Task_ConductEntranceExam" targetRef="Gateway_ExamResult" />
    <bpmn:serviceTask id="Task_ExamRejection" name="Prüfungsabsage versenden" camunda:delegateExpression="#{examRejectionDelegate}">
      <bpmn:incoming>Flow_ExamFailed</bpmn:incoming>
      <bpmn:outgoing>Flow_ToExamRejectionEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_ExamRejection" name="Ablehnung - Prüfung nicht bestanden">
      <bpmn:incoming>Flow_ToExamRejectionEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_ToExamRejectionEnd" sourceRef="Task_ExamRejection" targetRef="Event_ExamRejection" />
    <bpmn:sequenceFlow id="Flow_ExamPassed" name="Bestanden" sourceRef="Gateway_ExamResult" targetRef="Task_SendAdmissionLetter">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${examPassed == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ExamFailed" name="Nicht bestanden" sourceRef="Gateway_ExamResult" targetRef="Task_ExamRejection">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${examPassed == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ToPaymentProcess" sourceRef="Task_DirectAdmission" targetRef="Task_SendAdmissionLetter">
      <bpmn:extensionElements />
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_PaymentReceived" name="bezahlt" sourceRef="Gateway_PaymentCheck" targetRef="Task_GenerateStudentNumber">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${paymentReceived == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_PaymentMissing" name="Nicht bezahlt" sourceRef="Gateway_PaymentCheck" targetRef="Task_SendPaymentReminder">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${paymentReceived == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:intermediateCatchEvent id="Event_WaitForPayment" name="Warten auf Semesterbeitrag">
      <bpmn:incoming>Flow_ToPaymentWait</bpmn:incoming>
      <bpmn:outgoing>Flow_035q2i3</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_04c8wjc">
        <bpmn:timeDuration>PT1M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_ToPaymentWait" sourceRef="Task_SendAdmissionLetter" targetRef="Event_WaitForPayment" />
    <bpmn:serviceTask id="Task_CheckPaymentStatus" name="Zahlungsstatus prüfen" camunda:delegateExpression="#{paymentCheckDelegate}">
      <bpmn:incoming>Flow_035q2i3</bpmn:incoming>
      <bpmn:outgoing>Flow_ToPaymentGateway</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_035q2i3" sourceRef="Event_WaitForPayment" targetRef="Task_CheckPaymentStatus" />
    <bpmn:exclusiveGateway id="Gateway_PaymentCheck" name="Zahlung eingegangen?">
      <bpmn:incoming>Flow_ToPaymentGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_PaymentMissing</bpmn:outgoing>
      <bpmn:outgoing>Flow_PaymentReceived</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_ToPaymentGateway" sourceRef="Task_CheckPaymentStatus" targetRef="Gateway_PaymentCheck" />
    <bpmn:serviceTask id="Task_SendPaymentReminder" name="Zahlungserinnerung versenden" camunda:delegateExpression="#{paymentReminderDelegate}">
      <bpmn:incoming>Flow_PaymentMissing</bpmn:incoming>
      <bpmn:outgoing>Flow_ToSecondPaymentWait</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:intermediateCatchEvent id="Event_SecondPaymentDeadline" name="Zweite Zahlungsfrist">
      <bpmn:incoming>Flow_ToSecondPaymentWait</bpmn:incoming>
      <bpmn:outgoing>Flow_ToFinalPaymentCheck</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_14lz4lf">
        <bpmn:timeDuration>PT1M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:serviceTask id="Task_FinalPaymentCheck" name="Finale Zahlungsprüfung" camunda:delegateExpression="#{finalPaymentCheckDelegate}">
      <bpmn:incoming>Flow_ToFinalPaymentCheck</bpmn:incoming>
      <bpmn:outgoing>Flow_ToFinalPaymentGateway</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_FinalPaymentCheck" name="Finale Zahlung?">
      <bpmn:incoming>Flow_ToFinalPaymentGateway</bpmn:incoming>
      <bpmn:outgoing>Flow_PaymentRejection</bpmn:outgoing>
      <bpmn:outgoing>Flow_FinalPaymentReceived</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_PaymentRejection" name="Ablehnung wegen fehlender Zahlung" camunda:delegateExpression="#{paymentRejectionDelegate}">
      <bpmn:incoming>Flow_PaymentRejection</bpmn:incoming>
      <bpmn:outgoing>Flow_ToPaymentRejectionEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="Event_PaymentRejection" name="Ablehnung - Zahlung nicht eingegangen">
      <bpmn:incoming>Flow_ToPaymentRejectionEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_ToSecondPaymentWait" sourceRef="Task_SendPaymentReminder" targetRef="Event_SecondPaymentDeadline" />
    <bpmn:sequenceFlow id="Flow_ToFinalPaymentCheck" sourceRef="Event_SecondPaymentDeadline" targetRef="Task_FinalPaymentCheck" />
    <bpmn:sequenceFlow id="Flow_ToFinalPaymentGateway" sourceRef="Task_FinalPaymentCheck" targetRef="Gateway_FinalPaymentCheck" />
    <bpmn:sequenceFlow id="Flow_PaymentRejection" name="Nicht bezahlt" sourceRef="Gateway_FinalPaymentCheck" targetRef="Task_PaymentRejection">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${finalPaymentReceived == false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ToPaymentRejectionEnd" sourceRef="Task_PaymentRejection" targetRef="Event_PaymentRejection" />
    <bpmn:serviceTask id="Task_GenerateStudentNumber" name="Matrikelnummer generieren" camunda:delegateExpression="#{generateStudentNumberDelegate}">
      <bpmn:incoming>Flow_FinalPaymentReceived</bpmn:incoming>
      <bpmn:incoming>Flow_PaymentReceived</bpmn:incoming>
      <bpmn:outgoing>Flow_ToCreateStudentRecord</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="Task_CreateStudentRecord" name="Studentendatensatz erstellen" camunda:delegateExpression="#{createStudentRecordDelegate}">
      <bpmn:incoming>Flow_ToCreateStudentRecord</bpmn:incoming>
      <bpmn:outgoing>Flow_ToWelcomePackage</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_FinalPaymentReceived" name="bezahlt" sourceRef="Gateway_FinalPaymentCheck" targetRef="Task_GenerateStudentNumber">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${finalPaymentReceived == true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_ToCreateStudentRecord" sourceRef="Task_GenerateStudentNumber" targetRef="Task_CreateStudentRecord" />
    <bpmn:serviceTask id="Task_SendWelcomePackage" name="Willkommenspaket versenden" camunda:delegateExpression="#{welcomePackageDelegate}">
      <bpmn:incoming>Flow_ToWelcomePackage</bpmn:incoming>
      <bpmn:outgoing>Flow_ToSuccessEnd</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_ToWelcomePackage" sourceRef="Task_CreateStudentRecord" targetRef="Task_SendWelcomePackage" />
    <bpmn:endEvent id="Event_EnrollmentSuccessful" name="Immatrikulation erfolgreich">
      <bpmn:incoming>Flow_ToSuccessEnd</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_ToSuccessEnd" sourceRef="Task_SendWelcomePackage" targetRef="Event_EnrollmentSuccessful" />
    <bpmn:intermediateCatchEvent id="Event_WaitToCalculate" name="Auf alle Bewerbungen warten">
      <bpmn:incoming>Flow_NumerusClausus</bpmn:incoming>
      <bpmn:outgoing>Flow_ToCalculteNote</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_00m7hur">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT5M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:sequenceFlow id="Flow_ToCalculteNote" sourceRef="Event_WaitToCalculate" targetRef="Task_CalculateNCRanking" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="student-application-process">
      <bpmndi:BPMNShape id="StartEvent_ApplicationReceived_di" bpmnElement="StartEvent_ApplicationReceived">
        <dc:Bounds x="152" y="312" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="138" y="355" width="64" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SaveApplication_di" bpmnElement="Task_SaveApplication">
        <dc:Bounds x="240" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_WelcomeMessage_di" bpmnElement="Task_WelcomeMessage">
        <dc:Bounds x="390" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_DeadlineCheck_di" bpmnElement="Task_DeadlineCheck">
        <dc:Bounds x="540" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_DeadlineDecision_di" bpmnElement="Gateway_DeadlineDecision" isMarkerVisible="true">
        <dc:Bounds x="695" y="305" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="746" y="333" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_HandleRejection_di" bpmnElement="Task_HandleRejection">
        <dc:Bounds x="820" y="490" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_DocumentVerification_di" bpmnElement="Task_DocumentVerification">
        <dc:Bounds x="820" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_DocumentDecision_di" bpmnElement="Gateway_DocumentDecision" isMarkerVisible="true">
        <dc:Bounds x="995" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="990" y="304.5" width="59" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_HandleIncompleteDocuments_di" bpmnElement="Task_HandleIncompleteDocuments">
        <dc:Bounds x="970" y="80" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CompleteDocumentVerification_di" bpmnElement="Task_CompleteDocumentVerification">
        <dc:Bounds x="1160" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_ApplicationRejected_di" bpmnElement="Event_ApplicationRejected">
        <dc:Bounds x="1002" y="512" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="992" y="555" width="56" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_01197zt_di" bpmnElement="Event_WaitForDocuments">
        <dc:Bounds x="742" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="715" y="60" width="90" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_11a0ty1_di" bpmnElement="Gateway_AdmissionType" isMarkerVisible="true">
        <dc:Bounds x="1365" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1352" y="302" width="76" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_DirectAdmission_di" bpmnElement="Task_DirectAdmission">
        <dc:Bounds x="1530" y="60" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CalculateNCRanking_di" bpmnElement="Task_CalculateNCRanking">
        <dc:Bounds x="1600" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ScheduleEntranceExam_di" bpmnElement="Task_ScheduleEntranceExam">
        <dc:Bounds x="1520" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ConductEntranceExam_di" bpmnElement="Task_ConductEntranceExam">
        <dc:Bounds x="1890" y="450" width="100" height="80" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SendExamInvitation_di" bpmnElement="Task_SendExamInvitation">
        <dc:Bounds x="1700" y="450" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_NCSelection_di" bpmnElement="Task_NCSelection">
        <dc:Bounds x="1740" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_NCDecision_di" bpmnElement="Gateway_NCDecision" isMarkerVisible="true">
        <dc:Bounds x="1875" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1861.5" y="221" width="77" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_NCRejection_di" bpmnElement="Task_NCRejection">
        <dc:Bounds x="1850" y="350" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_NCRejection_di" bpmnElement="Event_NCRejection">
        <dc:Bounds x="2002" y="372" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1976" y="415" width="89" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SendAdmissionLetter_di" bpmnElement="Task_SendAdmissionLetter">
        <dc:Bounds x="2460" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_ExamResult_di" bpmnElement="Gateway_ExamResult" isMarkerVisible="true">
        <dc:Bounds x="2095" y="465" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2091" y="427.5" width="58" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ExamRejection_di" bpmnElement="Task_ExamRejection">
        <dc:Bounds x="2070" y="600" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_ExamRejection_di" bpmnElement="Event_ExamRejection">
        <dc:Bounds x="2102" y="762" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2080" y="805" width="81" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_WaitForPayment_di" bpmnElement="Event_WaitForPayment">
        <dc:Bounds x="2642" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2619" y="214" width="81" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CheckPaymentStatus_di" bpmnElement="Task_CheckPaymentStatus">
        <dc:Bounds x="2760" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_PaymentCheck_di" bpmnElement="Gateway_PaymentCheck" isMarkerVisible="true">
        <dc:Bounds x="2945" y="245" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2935" y="215" width="70" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SendPaymentReminder_di" bpmnElement="Task_SendPaymentReminder">
        <dc:Bounds x="2920" y="400" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_SecondPaymentDeadline_di" bpmnElement="Event_SecondPaymentDeadline">
        <dc:Bounds x="2952" y="562" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2939" y="605" width="63" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_FinalPaymentCheck_di" bpmnElement="Task_FinalPaymentCheck">
        <dc:Bounds x="3100" y="540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_FinalPaymentCheck_di" bpmnElement="Gateway_FinalPaymentCheck" isMarkerVisible="true">
        <dc:Bounds x="3315" y="555" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3300" y="608" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_PaymentRejection_di" bpmnElement="Task_PaymentRejection">
        <dc:Bounds x="3470" y="540" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_PaymentRejection_di" bpmnElement="Event_PaymentRejection">
        <dc:Bounds x="3632" y="562" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3614" y="605" width="73" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_GenerateStudentNumber_di" bpmnElement="Task_GenerateStudentNumber">
        <dc:Bounds x="3450" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_CreateStudentRecord_di" bpmnElement="Task_CreateStudentRecord">
        <dc:Bounds x="3650" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_SendWelcomePackage_di" bpmnElement="Task_SendWelcomePackage">
        <dc:Bounds x="3840" y="230" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_EnrollmentSuccessful_di" bpmnElement="Event_EnrollmentSuccessful">
        <dc:Bounds x="4042" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="4023" y="295" width="75" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0qjp5tu_di" bpmnElement="Event_WaitToCalculate">
        <dc:Bounds x="1502" y="252" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1489" y="295" width="68" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_ToSaveApplication_di" bpmnElement="Flow_ToSaveApplication">
        <di:waypoint x="188" y="330" />
        <di:waypoint x="240" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ToWelcomeMessage_di" bpmnElement="Flow_ToWelcomeMessage">
        <di:waypoint x="340" y="330" />
        <di:waypoint x="390" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ToDeadlineCheck_di" bpmnElement="Flow_ToDeadlineCheck">
        <di:waypoint x="490" y="330" />
        <di:waypoint x="540" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ToDeadlineGateway_di" bpmnElement="Flow_ToDeadlineGateway">
        <di:waypoint x="640" y="330" />
        <di:waypoint x="695" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_OnTime_di" bpmnElement="Flow_OnTime">
        <di:waypoint x="720" y="305" />
        <di:waypoint x="720" y="270" />
        <di:waypoint x="820" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="752" y="236" width="55" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_TooLate_di" bpmnElement="Flow_TooLate">
        <di:waypoint x="720" y="355" />
        <di:waypoint x="720" y="530" />
        <di:waypoint x="820" y="530" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="723" y="512" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ToDocumentGateway_di" bpmnElement="Flow_ToDocumentGateway">
        <di:waypoint x="920" y="270" />
        <di:waypoint x="995" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_DocumentsComplete_di" bpmnElement="Flow_DocumentsComplete">
        <di:waypoint x="1045" y="270" />
        <di:waypoint x="1160" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1082" y="236" width="57" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_DocumentsIncomplete_di" bpmnElement="Flow_DocumentsIncomplete">
        <di:waypoint x="1020" y="245" />
        <di:waypoint x="1020" y="160" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="939" y="185" width="65" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_ToRejectionEnd_di" bpmnElement="Flow_ToRejectionEnd">
        <di:waypoint x="920" y="530" />
        <di:waypoint x="1002" y="530" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ikedpf_di" bpmnElement="Flow_WaitForDocuments">
        <di:waypoint x="970" y="120" />
        <di:waypoint x="778" y="120" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18oqo4i_di" bpmnElement="Flow_ReturnToValidation">
        <di:waypoint x="742" y="120" />
        <di:waypoint x="590" y="120" />
        <di:waypoint x="590" y="290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vb0xrj_di" bpmnElement="Flow_ToAdmission">
        <di:waypoint x="1260" y="270" />
        <di:waypoint x="1365" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rgx7vy_di" bpmnElement="Flow_OpenAdmission">
        <di:waypoint x="1390" y="245" />
        <di:waypoint x="1390" y="100" />
        <di:waypoint x="1530" y="100" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1404" y="83" width="72" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1a12vu8_di" bpmnElement="Flow_NumerusClausus">
        <di:waypoint x="1415" y="270" />
        <di:waypoint x="1502" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1406" y="243" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1g82i45_di" bpmnElement="Flow_EntranceExam">
        <di:waypoint x="1390" y="295" />
        <di:waypoint x="1390" y="490" />
        <di:waypoint x="1520" y="490" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1406" y="473" width="88" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kqllpr_di" bpmnElement="Flow_NCAccepted">
        <di:waypoint x="1925" y="270" />
        <di:waypoint x="2460" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2142" y="252" width="69" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15rrekh_di" bpmnElement="Flow_NCRejected">
        <di:waypoint x="1900" y="295" />
        <di:waypoint x="1900" y="350" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1866" y="311" width="50" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07knhio_di" bpmnElement="Flow_ToExamNotification">
        <di:waypoint x="1620" y="490" />
        <di:waypoint x="1700" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1jc81zc_di" bpmnElement="Flow_ToExamWait">
        <di:waypoint x="1800" y="490" />
        <di:waypoint x="1890" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rb6ttr_di" bpmnElement="Flow_ToNCSelection">
        <di:waypoint x="1700" y="270" />
        <di:waypoint x="1740" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_19qgtg9_di" bpmnElement="Flow_19qgtg9">
        <di:waypoint x="1840" y="270" />
        <di:waypoint x="1875" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01kc6sk_di" bpmnElement="Flow_ToNCRejectionEnd">
        <di:waypoint x="1950" y="390" />
        <di:waypoint x="2002" y="390" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tfm05b_di" bpmnElement="Flow_ToExamGateway">
        <di:waypoint x="1990" y="490" />
        <di:waypoint x="2095" y="490" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0g8wnnp_di" bpmnElement="Flow_ToExamRejectionEnd">
        <di:waypoint x="2120" y="680" />
        <di:waypoint x="2120" y="762" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fyhh6u_di" bpmnElement="Flow_ExamPassed">
        <di:waypoint x="2145" y="490" />
        <di:waypoint x="2480" y="490" />
        <di:waypoint x="2480" y="310" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2289" y="472" width="53" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0f24wi0_di" bpmnElement="Flow_ExamFailed">
        <di:waypoint x="2120" y="515" />
        <di:waypoint x="2120" y="600" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2030" y="533" width="80" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0t4uo21_di" bpmnElement="Flow_ToPaymentProcess">
        <di:waypoint x="1630" y="100" />
        <di:waypoint x="2490" y="100" />
        <di:waypoint x="2490" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_18f77l0_di" bpmnElement="Flow_PaymentReceived">
        <di:waypoint x="2995" y="270" />
        <di:waypoint x="3450" y="270" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3206" y="252" width="36" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0xjteij_di" bpmnElement="Flow_PaymentMissing">
        <di:waypoint x="2970" y="295" />
        <di:waypoint x="2970" y="400" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2939" y="323" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0rotk65_di" bpmnElement="Flow_ToPaymentWait">
        <di:waypoint x="2560" y="270" />
        <di:waypoint x="2642" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_035q2i3_di" bpmnElement="Flow_035q2i3">
        <di:waypoint x="2678" y="270" />
        <di:waypoint x="2760" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1ybf4g1_di" bpmnElement="Flow_ToPaymentGateway">
        <di:waypoint x="2860" y="270" />
        <di:waypoint x="2945" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07tgxq7_di" bpmnElement="Flow_ToSecondPaymentWait">
        <di:waypoint x="2970" y="480" />
        <di:waypoint x="2970" y="562" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0wyprku_di" bpmnElement="Flow_ToFinalPaymentCheck">
        <di:waypoint x="2988" y="580" />
        <di:waypoint x="3100" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_07y21k8_di" bpmnElement="Flow_ToFinalPaymentGateway">
        <di:waypoint x="3200" y="580" />
        <di:waypoint x="3315" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_065a5dg_di" bpmnElement="Flow_PaymentRejection">
        <di:waypoint x="3365" y="580" />
        <di:waypoint x="3470" y="580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3386" y="562" width="64" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1o89szw_di" bpmnElement="Flow_ToPaymentRejectionEnd">
        <di:waypoint x="3570" y="580" />
        <di:waypoint x="3632" y="580" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_122bo9a_di" bpmnElement="Flow_FinalPaymentReceived">
        <di:waypoint x="3340" y="555" />
        <di:waypoint x="3340" y="290" />
        <di:waypoint x="3450" y="290" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="3322" y="483" width="36" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1uittp2_di" bpmnElement="Flow_ToCreateStudentRecord">
        <di:waypoint x="3550" y="270" />
        <di:waypoint x="3650" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_079sgpc_di" bpmnElement="Flow_ToWelcomePackage">
        <di:waypoint x="3750" y="270" />
        <di:waypoint x="3840" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vi648k_di" bpmnElement="Flow_ToSuccessEnd">
        <di:waypoint x="3940" y="270" />
        <di:waypoint x="4042" y="270" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0sr2l7o_di" bpmnElement="Flow_ToCalculteNote">
        <di:waypoint x="1538" y="270" />
        <di:waypoint x="1600" y="270" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
